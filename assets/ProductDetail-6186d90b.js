import{r as u,e as f,a as t,h as b,j as s,F as _,i as v,b as C,B as N,C as H}from"./index-21e2e132.js";const P="_article_19rjx_1",k="_productImage_19rjx_7",Q="_productInfo_19rjx_14",F="_focus_19rjx_21",S="_input_19rjx_28",q="_button_19rjx_35",A="_detail_19rjx_47",r={article:P,productImage:k,productInfo:Q,focus:F,input:S,button:q,detail:A},D="_recommend_198nz_1",E={recommend:D},T=i=>{const[e,l]=u.exports.useState([]),n=f();u.exports.useEffect(()=>{var c;n("/product-recommend/"+((c=i.product)==null?void 0:c.product_id),{useData(o){o&&o.products&&l(o.products)}})},[i.product]);const a=e.map(c=>{if(c)return t(b,{product:c},c.product_id)});return t("section",{className:E.recommend,children:a.length>0?s(_,{children:[t("header",{children:t("h1",{children:"Recommend:"})}),t("nav",{children:t("ul",{children:a})})]}):t(_,{})})},R=i=>{const[e,l]=u.exports.useState(),[n,a]=u.exports.useState(1),c=f(),o=v().productId,x=C(d=>d.auth).userId;u.exports.useEffect(()=>{c("/product-detail/"+o,{useData(d){l(d.product)}})},[o]);function I(){a(n+1)}function g(){n>0&&a(n-1)}function y(){c("/add-to-cart",{method:"put",body:{productId:o,quantity:n,userId:x},headers:{"Content-Type":"application/json"}})}let m=0;const j=d=>{const h=d.target;+h.value<=-1||a(+h.value)};let p;return e?(m=e.price*n,p=s("article",{className:r.article,children:[t("div",{className:r.productImage,children:t("img",{src:e.imageUrl,alt:e.description})}),s("div",{className:r.productInfo,children:[t("h1",{children:e.title}),t("p",{children:e.description}),s("div",{className:r.focus,children:[t("label",{htmlFor:"quantity",children:"Quantity:"}),s("div",{className:"quantity",children:[t("button",{onClick:g,className:r.button,children:"-"}),t("input",{className:r.input,value:n,onChange:j,type:"text"}),t("button",{onClick:I,className:r.button,children:"+"})]}),s("i",{children:[m.toFixed(2),"$"]})]}),t(N,{onClick:y,children:"Add To Cart"})]})]})):p=t("p",{children:"Loading!"}),s(H,{children:[p,t(T,{product:e})]})};export{R as default};
