import{r as p,b as f,e as I,j as c,a as e,B as _,F as g,C}from"./index-21e2e132.js";const y="_cart_ggjo9_1",A="_product_ggjo9_13",j="_productAction_ggjo9_21",x="_filledUpSpace_ggjo9_25",n={cart:y,product:A,productAction:j,filledUpSpace:x},T="_cart_1rk24_1",S="_productAction_1rk24_14",h={cart:T,productAction:S},P=t=>{const o=p.exports.useRef(null),d=f(r=>r.auth).userId,i=I();function u(){t.product&&t.onRemoveItem&&o&&o.current&&i("/delete-cart-item",{method:"DELETE",body:{userId:d,quantityToDelete:o.current.value,productId:t.product.product_id},headers:{"Content-Type":"application/json"},useData(r){r&&r.cartItems&&t&&t.onRemoveItem&&(console.log(r.cartItems),t.onRemoveItem(r.cartItems))}})}let s;return t.product&&(s=c("li",{className:h.cart,children:[c("div",{className:h.productInfo,children:[e("aside",{children:e("img",{src:t.product.imageUrl,alt:""})}),c("div",{children:[c("h3",{children:["Name:",t.product.title]}),c("p",{children:["Price:",t.product.price]})]})]}),e("div",{children:e("p",{children:t.product.description})}),c("div",{className:h.productAction,children:[c("h3",{children:["Quantity:",t.product.quantity]}),e("input",{ref:o,type:"number",min:"1",max:"5"}),c("p",{children:["Total Price:",(t.product.quantity*t.product.price).toFixed(2)]}),e(_,{onClick:u,children:"Delete"})]})]})),e(g,{children:s})},U=t=>{const[o,d]=p.exports.useState([1]),[i,u]=p.exports.useState(),s=f(a=>a.auth).userId,r=I();p.exports.useEffect(()=>{r("/cart/"+s,{useData(a){u(a.cartItems)}})},[o]);function v(a){o[0]==1?d([0]):d([1]),u(a)}function N(){r("/add-order",{method:"POST",body:{userId:s},headers:{"Content-Type":"Application/json"},useData(a){d([2])}})}if(i&&i.length>0){const a=i.map(l=>e(P,{onRemoveItem:v,product:l},l.product_id));if(a.length==0)return e("section",{className:n.cart,children:"No Item found!"});{let l=0;return i.map(m=>{m&&m.quantity&&(l+=m.price*m.quantity)}),e(C,{children:c("main",{className:n.cart,children:[c("div",{className:n.filledUpSpace,children:[e("div",{className:n.titleCart,children:"Your Cart:"}),e("div",{className:n.listOfProducts,children:e("ul",{className:n.holdProducts,children:a})})]}),c("div",{className:n.total,children:[e("div",{className:"partOfTotal",children:c("h1",{children:["Total Price:",l]})}),e("div",{className:"partOfTotal",children:e(_,{onClick:N,children:"Order!"})})]})]})})}}else return e("section",{className:n.cart,children:"No Item found!"})};export{U as default};
